{"ast":null,"code":"import mongoose from 'mongoose';\nmongoose.Promise = global.Promise;\n\nconst connectDB = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState !== 1) {\n    await mongoose.connect('mongodb://localhost/covidGraphql', {\n      useNewUrlParser: true,\n      useUnifiedTopology: true\n    });\n  }\n\n  return handler(req, res);\n};\n\nconst db = mongoose.connection;\ndb.once('open', () => {\n  console.log('Connected to MongoDB');\n});\nexport default connectDB;","map":{"version":3,"sources":["/home/eduardo/projetos/covid/src/server/database/index.js"],"names":["mongoose","Promise","global","connectDB","handler","req","res","connections","readyState","connect","useNewUrlParser","useUnifiedTopology","db","connection","once","console","log"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;AACAA,QAAQ,CAACC,OAAT,GAAmBC,MAAM,CAACD,OAA1B;;AAEA,MAAME,SAAS,GAAIC,OAAD,IAAa,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAClD,MAAIN,QAAQ,CAACO,WAAT,CAAqB,CAArB,EAAwBC,UAAxB,KAAuC,CAA3C,EAA8C;AAC7C,UAAMR,QAAQ,CAACS,OAAT,CAAiB,kCAAjB,EAAqD;AAC1DC,MAAAA,eAAe,EAAE,IADyC;AAE1DC,MAAAA,kBAAkB,EAAE;AAFsC,KAArD,CAAN;AAIA;;AACD,SAAOP,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACA,CARD;;AAUA,MAAMM,EAAE,GAAGZ,QAAQ,CAACa,UAApB;AACAD,EAAE,CAACE,IAAH,CAAQ,MAAR,EAAgB,MAAM;AACrBC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,CAFD;AAIA,eAAeb,SAAf","sourcesContent":["import mongoose from 'mongoose';\nmongoose.Promise = global.Promise;\n\nconst connectDB = (handler) => async (req, res) => {\n\tif (mongoose.connections[0].readyState !== 1) {\n\t\tawait mongoose.connect('mongodb://localhost/covidGraphql', {\n\t\t\tuseNewUrlParser: true,\n\t\t\tuseUnifiedTopology: true,\n\t\t});\n\t}\n\treturn handler(req, res);\n};\n\nconst db = mongoose.connection;\ndb.once('open', () => {\n\tconsole.log('Connected to MongoDB');\n});\n\nexport default connectDB;\n"]},"metadata":{},"sourceType":"module"}